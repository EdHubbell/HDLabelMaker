<Window x:Class="HDLabelMaker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:HDLabelMaker.ViewModels"
        Title="Home Depot Label Maker" 
        Height="700" Width="900"
        WindowStartupLocation="CenterScreen">
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Margin="0,0,0,15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Column="0">
                <TextBlock Text="Home Depot Label Maker" 
                           FontSize="24" FontWeight="Bold" Foreground="#F96302"/>
                <TextBlock Text="Star TSP100 Thermal Label Printer" 
                           FontSize="12" Foreground="Gray"/>
            </StackPanel>
            <Button Grid.Column="1" Content="Select Printer" Command="{Binding SelectPrinterCommand}" 
                    Width="120" Height="35" VerticalAlignment="Center"/>
        </Grid>

        <!-- Search Section -->
        <GroupBox Header="Product Search" Grid.Row="1" Margin="0,0,0,15">
            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" 
                         FontSize="14" Padding="5"
                         ToolTip="Enter SKU, Barcode, or Product Name"/>
                <Button Content="Search" Command="{Binding SearchCommand}" 
                        Grid.Column="2" Width="80" Padding="10,5"/>
                <Button Content="Manage Associations" Command="{Binding ManageAssociationsCommand}" 
                        Grid.Column="4" Width="150" Padding="10,5"/>
            </Grid>
        </GroupBox>

        <!-- Main Content -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="15"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left: Label Selection -->
            <GroupBox Header="Available Labels" Grid.Column="0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <ListBox ItemsSource="{Binding Labels}" 
                             SelectedItem="{Binding SelectedLabel}"
                             DisplayMemberPath="DisplayName"
                             Margin="5"/>
                    <Button Grid.Row="1" Content="Refresh Labels" Command="{Binding RefreshLabelsCommand}"
                            Margin="5" HorizontalAlignment="Left"/>
                </Grid>
            </GroupBox>

            <!-- Right: Print Settings -->
            <GroupBox Header="Print Settings" Grid.Column="2">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Margin="0,0,0,10">
                        <TextBlock Text="Selected Product:" FontWeight="Bold"/>
                        <TextBlock Text="{Binding SelectedAssociation.ProductName}" 
                                   FontSize="16" TextWrapping="Wrap"/>
                        <TextBlock Text="{Binding SelectedAssociation.Sku, StringFormat='SKU: {0}'}" 
                                   Foreground="Gray"/>
                    </StackPanel>

                    <StackPanel Grid.Row="1" Margin="0,0,0,10">
                        <TextBlock Text="Selected Label:" FontWeight="Bold"/>
                        <TextBlock Text="{Binding SelectedLabel.DisplayName}" 
                                   FontSize="14" TextWrapping="Wrap"/>
                    </StackPanel>

                    <StackPanel Grid.Row="2" Margin="0,0,0,10" Orientation="Horizontal">
                        <TextBlock Text="Print Count: " VerticalAlignment="Center"/>
                        <TextBox Text="{Binding PrintCount}" Width="60" Margin="5,0"/>
                        <Button Content="-" Width="30" Click="DecrementCount"/>
                        <Button Content="+" Width="30" Click="IncrementCount"/>
                    </StackPanel>

                    <Button Content="PRINT LABEL" Command="{Binding PrintCommand}" 
                            Grid.Row="3" Height="60" FontSize="18" FontWeight="Bold"
                            Background="#F96302" Foreground="White" Margin="0,10"/>
                </Grid>
            </GroupBox>
        </Grid>

        <!-- Recent Products -->
        <GroupBox Header="Recently Printed" Grid.Row="3" Margin="0,15,0,10" MaxHeight="150">
            <ListBox ItemsSource="{Binding RecentAssociations}" 
                     SelectedItem="{Binding SelectedAssociation}"
                     DisplayMemberPath="ProductName"
                     Margin="5"/>
        </GroupBox>

        <!-- Paper Feed Controls -->
        <GroupBox Header="Paper Feed Alignment" Grid.Row="4" Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal" Margin="10,5">
                <TextBlock Text="Feed forward:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <Button Content="+1mm" Command="{Binding FeedPaperCommand}" CommandParameter="1"
                        Width="55" Height="28" Margin="2,0"/>
                <Button Content="+2mm" Command="{Binding FeedPaperCommand}" CommandParameter="2"
                        Width="55" Height="28" Margin="2,0"/>
                <Button Content="+5mm" Command="{Binding FeedPaperCommand}" CommandParameter="5"
                        Width="55" Height="28" Margin="2,0"/>
                <Button Content="+10mm" Command="{Binding FeedPaperCommand}" CommandParameter="10"
                        Width="60" Height="28" Margin="2,0"/>
            </StackPanel>
        </GroupBox>

        <!-- Status Bar -->
        <StatusBar Grid.Row="5">
            <StatusBarItem>
                <TextBlock Text="{Binding StatusMessage}" Foreground="Gray"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
